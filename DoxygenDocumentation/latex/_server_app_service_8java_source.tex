\hypertarget{_server_app_service_8java_source}{}\doxysection{Server\+App\+Service.\+java}
\label{_server_app_service_8java_source}\index{C:/Users/andon/Documents/GitHub/BSPQ23-\/E5-\/2/Server/src/main/java/main/ServerAppService.java@{C:/Users/andon/Documents/GitHub/BSPQ23-\/E5-\/2/Server/src/main/java/main/ServerAppService.java}}
\mbox{\hyperlink{_server_app_service_8java}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00001}00001\ \textcolor{keyword}{package\ }main;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00003}00003\ \textcolor{keyword}{import}\ java.util.ArrayList;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00004}00004\ \textcolor{keyword}{import}\ java.util.Base64;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00005}00005\ \textcolor{keyword}{import}\ java.util.Date;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00006}00006\ \textcolor{keyword}{import}\ java.util.LinkedList;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00007}00007\ \textcolor{keyword}{import}\ java.util.List;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00009}00009\ \textcolor{keyword}{import}\ org.json.JSONObject;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00010}00010\ }
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00011}00011\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedatabase}{database}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00012}00012\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedatabase}{database}}.\mbox{\hyperlink{classdatabase_1_1_guest_d_a_o}{GuestDAO}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00013}00013\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedatabase}{database}}.\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o}{HotelDAO}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00014}00014\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedatabase}{database}}.\mbox{\hyperlink{classdatabase_1_1_user_d_a_o}{UserDAO}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00015}00015\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedomain}{domain}}.\mbox{\hyperlink{classdomain_1_1_booking}{Booking}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00016}00016\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedomain}{domain}}.\mbox{\hyperlink{classdomain_1_1_guest}{Guest}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00017}00017\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedomain}{domain}}.\mbox{\hyperlink{classdomain_1_1_hotel}{Hotel}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00018}00018\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedomain}{domain}}.\mbox{\hyperlink{classdomain_1_1_room}{Room}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00019}00019\ \textcolor{keyword}{import}\ \mbox{\hyperlink{namespacedomain}{domain}}.\mbox{\hyperlink{classdomain_1_1_user}{User}};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00021}\mbox{\hyperlink{classmain_1_1_server_app_service}{00021}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmain_1_1_server_app_service}{ServerAppService}}\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00030}\mbox{\hyperlink{classmain_1_1_server_app_service_a17b3c3c4d1fec7e33773aa2807571ec1}{00030}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ String\ \mbox{\hyperlink{classmain_1_1_server_app_service_a17b3c3c4d1fec7e33773aa2807571ec1}{register}}(\mbox{\hyperlink{classdomain_1_1_user}{User}}\ user)\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00031}00031\ \ \ \ \ \ \ \ \ System.out.println(\textcolor{stringliteral}{"{}Register\ user:\ "{}}\ +user.\mbox{\hyperlink{classdomain_1_1_user_af71f8a5078957e4c3d56813a23e42473}{toString}}());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00032}00032\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(user.\mbox{\hyperlink{classdomain_1_1_user_a376e76030e3f942e1ec776bc41de75c6}{getLegalInfo}}().\mbox{\hyperlink{classdomain_1_1_guest_adcf5a5a3f92dc2e96fe8983a9a359401}{getAge}}()\ ==\ 0\ ||\ user.\mbox{\hyperlink{classdomain_1_1_user_a376e76030e3f942e1ec776bc41de75c6}{getLegalInfo}}().\mbox{\hyperlink{classdomain_1_1_guest_a595e7e57bd09c309a190ab7aa441c9c6}{getCityOfProvenance}}()\ ==\ \textcolor{stringliteral}{"{}"{}}\ ||\ user.\mbox{\hyperlink{classdomain_1_1_user_a376e76030e3f942e1ec776bc41de75c6}{getLegalInfo}}().\mbox{\hyperlink{classdomain_1_1_guest_a9e54a35bb182b93cc8c284c8d0a9795f}{getDni}}()\ ==\ \textcolor{stringliteral}{"{}"{}}\ ||\ user.\mbox{\hyperlink{classdomain_1_1_user_a376e76030e3f942e1ec776bc41de75c6}{getLegalInfo}}().\mbox{\hyperlink{classdomain_1_1_guest_ae883bc87ac9c2998283895b473dc0d01}{getName}}()\ ==\ \textcolor{stringliteral}{"{}"{}}\ ||\ user.\mbox{\hyperlink{classdomain_1_1_user_aa1079a5e2c084266988c9568c1de4e56}{getNick}}()\ ==\ \textcolor{stringliteral}{"{}"{}}\ ||\ user.\mbox{\hyperlink{classdomain_1_1_user_a82156325603d4e2cb751d184a3ad5b19}{getPassword}}()\ ==\ \textcolor{stringliteral}{"{}"{}}\ ||\ user.\mbox{\hyperlink{classdomain_1_1_user_a376e76030e3f942e1ec776bc41de75c6}{getLegalInfo}}().\mbox{\hyperlink{classdomain_1_1_guest_aa6f94832a97e705a679ce5b2d0c441f5}{getSurname}}()\ ==\ \textcolor{stringliteral}{"{}"{}})\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00033}00033\ \ \ \ \ \ \ \ \ \ \ \ \ System.out.println(\textcolor{stringliteral}{"{}Invalid\ field"{}});}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00034}00034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ IllegalArgumentException(\textcolor{stringliteral}{"{}You\ must\ fill\ all\ fields"{}});}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00035}00035\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00036}00036\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classdatabase_1_1_user_d_a_o}{UserDAO}}.\mbox{\hyperlink{classdatabase_1_1_user_d_a_o_abd550028bb2a34376e1907cd92024763}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_user_d_a_o_afe976b7a23a9e81b988c39b5e36fcbc5}{exists}}(user.\mbox{\hyperlink{classdomain_1_1_user_aa1079a5e2c084266988c9568c1de4e56}{getNick}}()))}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00037}00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \textcolor{keyword}{new}\ IllegalArgumentException(\textcolor{stringliteral}{"{}User\ already\ exists"{}});}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00038}00038\ \ \ \ \ \ \ \ \ \ \ \ \ System.out.println(\textcolor{stringliteral}{"{}Registration\ authorized"{}});}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00039}00039\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdatabase_1_1_user_d_a_o}{UserDAO}}.\mbox{\hyperlink{classdatabase_1_1_user_d_a_o_abd550028bb2a34376e1907cd92024763}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_user_d_a_o_adde618b63bb1655f9f7d96ab0cec48b8}{save}}(user);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00040}00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classmain_1_1_server}{Server}}.\mbox{\hyperlink{classmain_1_1_server_aa66ff6985dfd9b11d5bbf31e09aba2f7}{createSession}}(user);\textcolor{comment}{//TODO\ Change\ username\ for\ the\ User\ class\ instance}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00041}00041\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00042}00042\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00049}\mbox{\hyperlink{classmain_1_1_server_app_service_aabd75b4108a56e0b882d7761be1f3ea7}{00049}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ String\ \mbox{\hyperlink{classmain_1_1_server_app_service_aabd75b4108a56e0b882d7761be1f3ea7}{login}}(String\ username,\ String\ password)\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00050}00050\ \ \ \ \ \ \ \ \ System.out.println(\textcolor{stringliteral}{"{}Login\ user:\ username=\ "{}}\ +username+\ \textcolor{stringliteral}{"{}\ password=\ "{}}\ +password);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00051}00051\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdomain_1_1_user}{User}}\ u\ =\ \mbox{\hyperlink{classdatabase_1_1_user_d_a_o}{UserDAO}}.\mbox{\hyperlink{classdatabase_1_1_user_d_a_o_abd550028bb2a34376e1907cd92024763}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_user_d_a_o_a17ec5036c890794792c48a6ce32ae5ae}{find}}(username,\ password);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00052}00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(u\ ==\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00053}00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00054}00054\ \ \ \ \ \ \ \ \ JSONObject\ \textcolor{keywordtype}{object}\ =\ \textcolor{keyword}{new}\ JSONObject();}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00055}00055\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{object}.put(\textcolor{stringliteral}{"{}token"{}},\ Base64.getEncoder().encodeToString(\mbox{\hyperlink{classmain_1_1_server}{Server}}.\mbox{\hyperlink{classmain_1_1_server_aa66ff6985dfd9b11d5bbf31e09aba2f7}{createSession}}(u).getBytes()));}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{object}.put(\textcolor{stringliteral}{"{}isOwner"{}},\ u.isHotelOwner());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00057}00057\ \ \ \ \ \ \ \ \ System.out.println(\textcolor{keywordtype}{object}.toString());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00058}00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{object}.toString();\textcolor{comment}{//TODO\ Create\ the\ token\ if\ the\ user\ it's\ succesfully\ logged\ in}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00059}00059\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00066}00066\ \ \ \ \ @SuppressWarnings(\textcolor{stringliteral}{"{}deprecation"{}})}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00067}\mbox{\hyperlink{classmain_1_1_server_app_service_ac2931a22cecf661b49c28700f4c2770d}{00067}}\ \ \ \ \ public\ static\ \textcolor{keywordtype}{boolean}\ \mbox{\hyperlink{classmain_1_1_server_app_service_ac2931a22cecf661b49c28700f4c2770d}{reservationCreate}}(\mbox{\hyperlink{classdomain_1_1_booking}{Booking}}\ reservation)\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00068}00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(Date\ d\ =\ (Date)reservation.getCheckinDate().clone();\ !d.after(reservation.getCheckoutDate());\ d.setDate(d.getDate()\ +\ 1))}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2e956df355af937061c1942ae4014c00}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a3e295d6486d892e4ae65290af3537587}{hasReservationInRoomOnDate}}(reservation.getRoom(),\ d))}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00071}00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2e956df355af937061c1942ae4014c00}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2ea246db31ace3d964ffb2e3531d54c3}{save}}(reservation);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00072}00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00073}00073\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00079}\mbox{\hyperlink{classmain_1_1_server_app_service_a9d9f006971a8d6136c872c8863f2ecee}{00079}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ List<Booking>\ \mbox{\hyperlink{classmain_1_1_server_app_service_a9d9f006971a8d6136c872c8863f2ecee}{getReservationsByUser}}(\mbox{\hyperlink{classdomain_1_1_user}{User}}\ user)\{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00080}00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2e956df355af937061c1942ae4014c00}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a9658d731482299f8dcde292d6f0da26c}{getByAuthor}}(user.\mbox{\hyperlink{classdomain_1_1_user_a376e76030e3f942e1ec776bc41de75c6}{getLegalInfo}}());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00081}00081\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00088}\mbox{\hyperlink{classmain_1_1_server_app_service_a0d750ca966254e19eaf9a1346443f5fe}{00088}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ List<Booking>\ \mbox{\hyperlink{classmain_1_1_server_app_service_a0d750ca966254e19eaf9a1346443f5fe}{getReservationsByHotel}}(\mbox{\hyperlink{classdomain_1_1_user}{User}}\ user,\ String\ hotelId)\{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00089}00089\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdomain_1_1_hotel}{Hotel}}\ h\ =\ \mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o}{HotelDAO}}.\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o_acbd01d431d8fc161787c91bbe686218c}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o_a995079eb79111ec7866e69c2fc3c734b}{find}}(hotelId);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00090}00090\ \ \ \ \ \ \ \ \ List<Booking>\ bookings\ =\ \textcolor{keyword}{new}\ LinkedList<>();}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00091}00091\ \ \ \ \ \ \ \ \ h.\mbox{\hyperlink{classdomain_1_1_hotel_af0b0bb65c3baade4a15959bf5bd459bf}{getRooms}}().forEach(v\ -\/>\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ bookings.addAll(v.getBookings());\ \ \ }
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00093}00093\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00094}00094\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ bookings;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00095}00095\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00101}\mbox{\hyperlink{classmain_1_1_server_app_service_ac60de1284ca9b022404c3a6afc86a429}{00101}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \mbox{\hyperlink{classdomain_1_1_booking}{Booking}}\ \mbox{\hyperlink{classmain_1_1_server_app_service_ac60de1284ca9b022404c3a6afc86a429}{getReservationById}}(String\ bookingID)\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2e956df355af937061c1942ae4014c00}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a94599fa08d6a8e3762bf4c78d92c42fb}{find}}(bookingID);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00103}00103\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00110}\mbox{\hyperlink{classmain_1_1_server_app_service_a4d794dcd32e7a729e206019143266c9d}{00110}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{boolean}\ \mbox{\hyperlink{classmain_1_1_server_app_service_a4d794dcd32e7a729e206019143266c9d}{deleteReservation}}(\mbox{\hyperlink{classdomain_1_1_user}{User}}\ u,\ \textcolor{keywordtype}{int}\ bookingId)\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00111}00111\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdomain_1_1_booking}{Booking}}\ b\ =\ \mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2e956df355af937061c1942ae4014c00}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a94599fa08d6a8e3762bf4c78d92c42fb}{find}}(Integer.toString(bookingId));}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00112}00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!b.\mbox{\hyperlink{classdomain_1_1_booking_a8e301daeb0724801f2fcc982321770a7}{getAuthor}}().\mbox{\hyperlink{classdomain_1_1_guest_ae0eb4f6c02926548a2590fd69943552e}{equals}}(u.\mbox{\hyperlink{classdomain_1_1_user_a376e76030e3f942e1ec776bc41de75c6}{getLegalInfo}}()))}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00113}00113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00114}00114\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2e956df355af937061c1942ae4014c00}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a6051c6d63160cebe758e2eed978e7b9d}{delete}}(b);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00115}00115\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00116}00116\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00123}\mbox{\hyperlink{classmain_1_1_server_app_service_ad18a978ca991a18121094c3478682d82}{00123}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{boolean}\ \mbox{\hyperlink{classmain_1_1_server_app_service_ad18a978ca991a18121094c3478682d82}{editReservation}}(\mbox{\hyperlink{classdomain_1_1_user}{User}}\ u,\ \mbox{\hyperlink{classdomain_1_1_booking}{Booking}}\ b)\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00124}00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdomain_1_1_booking}{Booking}}\ toUpdate\ =\ \mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2e956df355af937061c1942ae4014c00}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a94599fa08d6a8e3762bf4c78d92c42fb}{find}}(Integer.toString(b.\mbox{\hyperlink{classdomain_1_1_booking_a27bbd4804a17519ba7ce0a32f107df89}{getId}}()));}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00125}00125\ \ \ \ \ \ \ \ \ toUpdate.\mbox{\hyperlink{classdomain_1_1_booking_a9ba2f6b76abccd726470bc41f3f6e6da}{setCheckinDate}}(b.\mbox{\hyperlink{classdomain_1_1_booking_a79d6e0942746ee2618b3db89aeca7a4b}{getCheckinDate}}());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00126}00126\ \ \ \ \ \ \ \ \ toUpdate.\mbox{\hyperlink{classdomain_1_1_booking_a3c4799dc18abe68a2ea30df7e8ad1395}{setCheckoutDate}}(b.\mbox{\hyperlink{classdomain_1_1_booking_a3d4fad3e1b92fdcf5d4f1bc2688b6c04}{getCheckoutDate}}());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00127}00127\ \ \ \ \ \ \ \ \ List<Guest>\ guests\ =\ \textcolor{keyword}{new}\ ArrayList<>();}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00128}00128\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\mbox{\hyperlink{classdomain_1_1_guest}{Guest}}\ g\ :\ b.\mbox{\hyperlink{classdomain_1_1_booking_acb0e9d95fd1012f37246456415f7de93}{getGuests}}())\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classdatabase_1_1_guest_d_a_o}{GuestDAO}}.\mbox{\hyperlink{classdatabase_1_1_guest_d_a_o_a998f128084d9711e8796f2ad728fef88}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_guest_d_a_o_a0d066952e6668010d2fb0b23d2fa6f7e}{exists}}(g.getDni()))}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ g\ =\ \mbox{\hyperlink{classdatabase_1_1_guest_d_a_o}{GuestDAO}}.\mbox{\hyperlink{classdatabase_1_1_guest_d_a_o_a998f128084d9711e8796f2ad728fef88}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_guest_d_a_o_a4c334d254cd037376c2feebacbfd3e88}{find}}(g.getDni());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ guests.add(g);\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00132}00132\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00133}00133\ \ \ \ \ \ \ \ \ toUpdate.\mbox{\hyperlink{classdomain_1_1_booking_ae149b48a9d83aff49c7a06ef75dc8d51}{setGuests}}(guests);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00134}00134\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classdatabase_1_1_booking_d_a_o}{BookingDAO}}.\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2e956df355af937061c1942ae4014c00}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_booking_d_a_o_a2ea246db31ace3d964ffb2e3531d54c3}{save}}(toUpdate);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00135}00135\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00141}\mbox{\hyperlink{classmain_1_1_server_app_service_a2316f06d53ed81a0122db37a6cc66ffa}{00141}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{boolean}\ \mbox{\hyperlink{classmain_1_1_server_app_service_a2316f06d53ed81a0122db37a6cc66ffa}{createHotel}}(\mbox{\hyperlink{classdomain_1_1_hotel}{Hotel}}\ h)\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00142}00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(h.\mbox{\hyperlink{classdomain_1_1_hotel_a41db63c9f09af4905e9e2251eca49d35}{getName}}().equals(\textcolor{stringliteral}{"{}"{}})\ ||\ h.\mbox{\hyperlink{classdomain_1_1_hotel_acd1ac38936eae91b6dd6fa887ef02e6a}{getCity}}().equals(\textcolor{stringliteral}{"{}"{}})\ ||\ h.\mbox{\hyperlink{classdomain_1_1_hotel_af0b0bb65c3baade4a15959bf5bd459bf}{getRooms}}().size()\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00144}00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o}{HotelDAO}}.\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o_acbd01d431d8fc161787c91bbe686218c}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o_aa93a3bf1d295eef833b1a642ffd914c0}{save}}(h);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00146}00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00147}00147\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00152}\mbox{\hyperlink{classmain_1_1_server_app_service_abe5b5a5c1ae41ea87beda555d93e40e8}{00152}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ List<Hotel>\ \mbox{\hyperlink{classmain_1_1_server_app_service_abe5b5a5c1ae41ea87beda555d93e40e8}{getHotels}}()\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00153}00153\ \ \ \ \ \ \ \ \ List<Hotel>\ h\ =\ \mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o}{HotelDAO}}.\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o_acbd01d431d8fc161787c91bbe686218c}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o_a444dbf6e3903158dacc5553db5636c9e}{getAll}}();}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00154}00154\ \ \ \ \ \ \ \ \ List<Hotel>\ transientList\ =\ \textcolor{keyword}{new}\ ArrayList<>(h.size());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00155}00155\ \ \ \ \ \ \ \ \ h.forEach(v-\/>\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ Hotel\ h1\ =\ new\ Hotel(v);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ LinkedList<Room>\ transientRooms\ =\ new\ LinkedList<>();}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ h1.getRooms().forEach(w-\/>\{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Room\ r\ =\ new\ Room(w);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00160}00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.setHotel(null);\textcolor{comment}{//Avoid\ stack\ overflow}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.setBookings(null);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00162}00162\ \ \ \ \ \ \ \ \ \ \ \ \ \});\textcolor{comment}{//Do\ not\ ship\ bookings}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00163}00163\ \ \ \ \ \ \ \ \ \ \ \ \ h1.setRooms(transientRooms);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00164}00164\ \ \ \ \ \ \ \ \ \ \ \ \ h1.setOwner(\textcolor{keyword}{null});\textcolor{comment}{//No\ need\ to\ know\ private\ info\ of\ owner}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00165}00165\ \ \ \ \ \ \ \ \ \ \ \ \ transientList.add(h1);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00166}00166\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00167}00167\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transientList;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00168}00168\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00174}\mbox{\hyperlink{classmain_1_1_server_app_service_ae73c47232fab6350f0936d7656c92a72}{00174}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ List<Hotel>\ \mbox{\hyperlink{classmain_1_1_server_app_service_ae73c47232fab6350f0936d7656c92a72}{getHotels}}(String\ query)\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00175}00175\ \ \ \ \ \ \ \ \ List<Hotel>\ h\ =\ \mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o}{HotelDAO}}.\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o_acbd01d431d8fc161787c91bbe686218c}{getInstance}}().\mbox{\hyperlink{classdatabase_1_1_hotel_d_a_o_ad8ecec87bf471ac53d5d2528db340466}{getByName}}(query);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00176}00176\ \ \ \ \ \ \ \ \ List<Hotel>\ transientList\ =\ \textcolor{keyword}{new}\ ArrayList<>(h.size());}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00177}00177\ \ \ \ \ \ \ \ \ h.forEach(v-\/>\ \{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00178}00178\ \ \ \ \ \ \ \ \ \ \ \ \ Hotel\ h1\ =\ new\ Hotel(v);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00179}00179\ \ \ \ \ \ \ \ \ \ \ \ \ LinkedList<Room>\ transientRooms\ =\ new\ LinkedList<>();}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00180}00180\ \ \ \ \ \ \ \ \ \ \ \ \ h1.getRooms().forEach(w-\/>\{}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Room\ r\ =\ new\ Room(w);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.setHotel(null);\textcolor{comment}{//Avoid\ stack\ overflow}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ r.setBookings(null);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ \});\textcolor{comment}{//Do\ not\ ship\ bookings}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00185}00185\ \ \ \ \ \ \ \ \ \ \ \ \ h1.setRooms(transientRooms);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00186}00186\ \ \ \ \ \ \ \ \ \ \ \ \ h1.setOwner(\textcolor{keyword}{null});\textcolor{comment}{//No\ need\ to\ know\ private\ info\ of\ owner}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00187}00187\ \ \ \ \ \ \ \ \ \ \ \ \ transientList.add(h1);}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00188}00188\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00189}00189\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ transientList;}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00190}00190\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_server_app_service_8java_source_l00191}00191\ \}}

\end{DoxyCode}
